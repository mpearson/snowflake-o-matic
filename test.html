<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="description" content>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Snowflake-O-Matic Prototype</title>
<script src="pixi.js"></script>
<style>
body {
  background: rgb(17, 32, 116);
  color: rgb(126, 181, 226);
  font-family: sans-serif;
  font-size: 12px;
  padding: 20px;
}
button {
  border: none;
  background-color: rgba(38, 126, 184, 0.5);
  padding:10px;
  margin: 10px 0;
  color: white;
  outline: none;
  transition: background-color 100ms;
}
button:hover {
  background-color: rgba(38, 126, 184, 0.75);
}
button:active {
  background-color: rgba(126, 191, 231, 0.5);
}
</style>
</head>
<body>
<button id="regenerate-button">Regenerate</button>
<div id="canvas-wrapper"></div>
<script>
var width = 800;
var height = 600;

var shapeSize = 100;

var app = new PIXI.Application(width, height, {backgroundColor : 0x5293bb});
document.getElementById("canvas-wrapper").appendChild(app.view);
var graphics = new PIXI.Graphics();
app.stage.addChild(graphics);
graphics.x = width / 2;
graphics.y = height / 2;

var count = 12;
var points = [];
var targets = [];
for (var i = 0; i < count; i++) {
  points.push([0, 0]);
  targets.push([0, 0]);
}


var regenerate = function() {
  for (var i = 0; i < count; i++) {
    var x = Math.random() * shapeSize - (0.5 * shapeSize);
    var y = Math.random() * shapeSize - (0.5 * shapeSize);

    targets[i][0] = x;
    targets[i][1] = y;
  }
};

window.setInterval(function() {
  // update positions
  for (var i = 0; i < count; i++) {
    var target = targets[i];
    var point = points[i];
    point[0] += (target[0] - point[0] / 5);
    point[1] += (target[1] - point[1] / 5);
  }

  // render shape
  graphics.clear();
  graphics.beginFill(0xFFFFFF);
  var lastPoint = points[count - 1];
  graphics.moveTo(lastPoint[0], lastPoint[1]);
  for (var i = 0; i < count; i++) {
    var point = points[i];
    graphics.lineTo(point[0], point[1]);
  }
  graphics.endFill();

}, 20);

document.getElementById("regenerate-button").addEventListener("click", regenerate);

</script>
</body>

</html>
